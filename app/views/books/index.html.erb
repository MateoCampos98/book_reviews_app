<p style="color: green"><%= notice %></p>

<h1 class="title">Libros</h1>

<div class="book-card">
  <% @books.each do |book| %>
    <%= render(BookCardComponent.new(book: book)) %>
    <button onclick="toggleReviewForm('<%= dom_id(book) %>')" class="btn">
      Agregar rese単a
    </button>
    <%= turbo_frame_tag dom_id(book, :review_form) do %>
      <div id="review-form-<%= dom_id(book) %>" style="display: none;" class="review-form-container">
        <%= render(ReviewFormComponent.new(review: Review.new, book: book)) %>
      </div>
    <% end %>
  <% end %>
</div>

<%= link_to "Nueva rese単a", new_book_path %>

<script>
function toggleReviewForm(bookId) {
  const form = document.getElementById(`review-form-${bookId}`);
  const button = event.target;
  
  if (form.style.display === 'none') {
    form.style.display = 'block';
    button.textContent = 'Cancelar rese単a';
    button.classList.add('btn-cancel');
  } else {
    form.style.display = 'none';
    button.textContent = 'Agregar rese単a';
    button.classList.remove('btn-cancel');
  }
}
</script>